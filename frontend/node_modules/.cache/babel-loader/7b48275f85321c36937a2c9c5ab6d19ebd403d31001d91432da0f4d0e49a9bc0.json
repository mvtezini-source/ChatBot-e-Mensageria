{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nexport default function useWebSocket(url, token, onMessage) {\n  _s();\n  const wsRef = useRef(null);\n  useEffect(() => {\n    let ws;\n    try {\n      // Use token as subprotocol for secure passing from browser\n      ws = token ? new WebSocket(url, token) : new WebSocket(url);\n    } catch (e) {\n      console.error('ws ctor error', e);\n      return;\n    }\n    ws.onopen = () => console.log('ws open');\n    ws.onmessage = ev => {\n      let data = null;\n      try {\n        data = JSON.parse(ev.data);\n      } catch (e) {}\n      onMessage && onMessage(data);\n    };\n    ws.onerror = e => console.error('ws error', e);\n    ws.onclose = () => console.log('ws closed');\n    wsRef.current = ws;\n    return () => {\n      ws.close();\n    };\n  }, [url, token]);\n  return wsRef;\n}\n_s(useWebSocket, \"QdfxMzvzcAhNcX9HkNqVUNbfVRs=\");","map":{"version":3,"names":["useEffect","useRef","useWebSocket","url","token","onMessage","_s","wsRef","ws","WebSocket","e","console","error","onopen","log","onmessage","ev","data","JSON","parse","onerror","onclose","current","close"],"sources":["/workspaces/ChatBot-e-Mensageria/frontend/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nexport default function useWebSocket(url, token, onMessage){\n  const wsRef = useRef(null);\n\n  useEffect(()=>{\n    let ws;\n    try{\n      // Use token as subprotocol for secure passing from browser\n      ws = token ? new WebSocket(url, token) : new WebSocket(url);\n    }catch(e){\n      console.error('ws ctor error', e);\n      return;\n    }\n    ws.onopen = ()=>console.log('ws open');\n    ws.onmessage = (ev)=>{\n      let data = null;\n      try { data = JSON.parse(ev.data); } catch(e){}\n      onMessage && onMessage(data);\n    };\n    ws.onerror = (e)=>console.error('ws error',e);\n    ws.onclose = ()=>console.log('ws closed');\n    wsRef.current = ws;\n    return ()=>{ ws.close(); };\n  },[url, token]);\n\n  return wsRef;\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEzC,eAAe,SAASC,YAAYA,CAACC,GAAG,EAAEC,KAAK,EAAEC,SAAS,EAAC;EAAAC,EAAA;EACzD,MAAMC,KAAK,GAAGN,MAAM,CAAC,IAAI,CAAC;EAE1BD,SAAS,CAAC,MAAI;IACZ,IAAIQ,EAAE;IACN,IAAG;MACD;MACAA,EAAE,GAAGJ,KAAK,GAAG,IAAIK,SAAS,CAACN,GAAG,EAAEC,KAAK,CAAC,GAAG,IAAIK,SAAS,CAACN,GAAG,CAAC;IAC7D,CAAC,QAAMO,CAAC,EAAC;MACPC,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,CAAC,CAAC;MACjC;IACF;IACAF,EAAE,CAACK,MAAM,GAAG,MAAIF,OAAO,CAACG,GAAG,CAAC,SAAS,CAAC;IACtCN,EAAE,CAACO,SAAS,GAAIC,EAAE,IAAG;MACnB,IAAIC,IAAI,GAAG,IAAI;MACf,IAAI;QAAEA,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,EAAE,CAACC,IAAI,CAAC;MAAE,CAAC,CAAC,OAAMP,CAAC,EAAC,CAAC;MAC7CL,SAAS,IAAIA,SAAS,CAACY,IAAI,CAAC;IAC9B,CAAC;IACDT,EAAE,CAACY,OAAO,GAAIV,CAAC,IAAGC,OAAO,CAACC,KAAK,CAAC,UAAU,EAACF,CAAC,CAAC;IAC7CF,EAAE,CAACa,OAAO,GAAG,MAAIV,OAAO,CAACG,GAAG,CAAC,WAAW,CAAC;IACzCP,KAAK,CAACe,OAAO,GAAGd,EAAE;IAClB,OAAO,MAAI;MAAEA,EAAE,CAACe,KAAK,CAAC,CAAC;IAAE,CAAC;EAC5B,CAAC,EAAC,CAACpB,GAAG,EAAEC,KAAK,CAAC,CAAC;EAEf,OAAOG,KAAK;AACd;AAACD,EAAA,CAzBuBJ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}